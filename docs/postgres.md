---
layout: default
title: postgres
parent: kb
---

<details close markdown="block">
  <summary>
    Содержание
  </summary>
  {: .text-delta }
1. TOC
{:toc}
</details>

# ROLE
В PostgreSQL атрибуты роли (roles) определяют права и 
возможности, предоставляемые роли. Роли в PostgreSQL могут быть либо пользователями (логинами), либо группами пользователей. Вот основные атрибуты роли:

1. **LOGIN** - роль может выполнять вход в систему. Это атрибут по умолчанию для новых пользователей.
2. **NOLOGIN** - роль не может выполнять вход в систему. Обычно используется для групп ролей.
3. **SUPERUSER** - роль является суперпользователем и имеет все права в базе данных.
4. **NOSUPERUSER** - роль не является суперпользователем.
5. **CREATEDB** - роль может создавать базы данных.
6. **NOCREATEDB** - роль не может создавать базы данных.
7. **CREATEROLE** - роль может создавать и изменять другие роли.
8. **NOCREATEROLE** - роль не может создавать и изменять другие роли.
9. **INHERIT** - роль наследует права от ролей, которые ей назначены.
10. **NOINHERIT** - роль не наследует права от ролей, которые ей назначены.
11. **REPLICATION** - роль может выполнять действия, связанные с репликацией (например, создавать слот репликации).
12. **NOREPLICATION** - роль не может выполнять действия, связанные с репликацией.
13. **BYPASSRLS** - роль может обходить политику управления доступом к строкам (Row Level Security).
14. **NOBYPASSRLS** - роль не может обходить политику управления доступом к строкам.
15. **CONNECTION LIMIT** - ограничивает количество одновременных соединений, которые может установить роль.

Примеры создания ролей с различными атрибутами:

```sql
-- Создание роли пользователя с правами суперпользователя
CREATE ROLE superuser_role WITH SUPERUSER LOGIN PASSWORD 'password';

-- Создание роли пользователя без прав суперпользователя и без возможности создавать базы данных
CREATE ROLE normal_user WITH NOSUPERUSER NOCREATEDB LOGIN PASSWORD 'password';

-- Создание группы ролей без возможности входа
CREATE ROLE readonly_group WITH NOLOGIN;
```

Для изменения атрибутов существующей роли используется команда `ALTER ROLE`:

```sql
-- Добавление прав на создание баз данных роли normal_user
ALTER ROLE normal_user CREATEDB;

-- Удаление прав суперпользователя у роли superuser_role
ALTER ROLE superuser_role NOSUPERUSER;
```

Эти атрибуты позволяют гибко управлять правами доступа и возможностями пользователей в базе данных PostgreSQL.